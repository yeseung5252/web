<!DOCTYPE html>
<html lang="ko">
<head>
   <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DIARY ARCHIVE</title>
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2207-02@1.0/LeeSeoyun.min.css">
    
    <link rel="stylesheet" href="style.css">
    <style>
        .content {
            width: 100%;
            height: 100vh;
            overflow: hidden;
            position: relative;
        }
        .image-slider {
            display: flex;
            width: 400%; /* 4ê°œì˜ ìŠ¬ë¼ì´ë“œ */
            height: 100%;
            transition: transform 0.5s ease-in-out;
        }
        .slide {
            width: 25%;
            height: 100%;
            position: relative;
        }
        .full-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .overlay-sidebar {
            position: absolute;
            top: 0;
            left: 0;
            width: 280px;
            height: 100%;
            background: rgba(255, 255, 255, 0.7);
            color: white;
            padding: 30px;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        .logo {
            font-size: 1.8em;
            margin-bottom: 50px;
        }
        .main-menu a {
            color: rgb(0, 0, 0);
            text-decoration: none;
            display: block;
            padding: 10px 0;
            font-size: 1.1em;
        }
        .about-us a {
            color: #ccc;
            text-decoration: none;
            font-size: 0.9em;
        }
        /* ì˜¤ë²„ë ˆì´ ìŠ¤íƒ€ì¼ (ê²€ìƒ‰, ë©”ë‰´) */
        .search-overlay, .main-menu-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            display: none; 
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .search-overlay.active, .main-menu-overlay.active {
            display: flex;
        }
        .close-search-button, .close-main-menu-button {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            color: white;
            font-size: 2em;
            cursor: pointer;
        }
        /* â­ï¸ ìˆ˜ë™ ìŠ¬ë¼ì´ë“œ ì œì–´ ë²„íŠ¼ ìŠ¤íƒ€ì¼ â­ï¸ */
        .slide-control {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            padding: 10px 15px;
            font-size: 2em;
            cursor: pointer;
            z-index: 50; 
            transition: background-color 0.3s;
        }
        .slide-control:hover {
            background: rgba(0, 0, 0, 0.8);
        }
        .slide-control.prev {
            left: 20px;
        }
        .slide-control.next {
            right: 20px;
        }
    </style>
</head>
<body>

    <main class="content">
        <div class="image-slider" id="image-slider">
            
            <div class="slide slide-with-menu" data-index="0">
                <img src="main-image-1.jpg" alt="ë©”ì¸ ì´ë¯¸ì§€ 1" class="full-img">

                <div class="overlay-sidebar">
                    <h1 class="logo">DIARY ARCHIVE</h1>
                    <nav class="main-menu">
                        <a href="category.html">CATEGORY</a>
                        <a href="bookmark.html">BOOKMARK</a>
                        <a href="#" id="open-search" class="icon-link">ğŸ” ê²€ìƒ‰</a>
                        <a href="#" id="open-main-menu" class="icon-link">â˜° ë©”ë‰´</a>
                    </nav>
                    <div class="about-us">
                        <a href="about.html">ABOUT US</a>
                    </div>
                </div>
            </div>

            <div class="slide" data-index="1">
                <img src="main-image-2.jpg" alt="ë©”ì¸ ì´ë¯¸ì§€ 2" class="full-img">
            </div>
            <div class="slide" data-index="2">
                <img src="main-image-3.jpg" alt="ë©”ì¸ ì´ë¯¸ì§€ 3" class="full-img">
            </div>
            <div class="slide" data-index="3">
                <img src="main-image-4.jpg" alt="ë©”ì¸ ì´ë¯¸ì§€ 4" class="full-img">
            </div>
        </div>
        
        <button class="slide-control prev" id="prev-slide">â€¹</button>
        <button class="slide-control next" id="next-slide">â€º</button>

    </main>
    
    <div class="search-overlay" id="search-modal">
        <button class="close-search-button" aria-label="ë‹«ê¸°">X</button>
        <div class="search-content">
            <form action="/search" method="GET">
                <input type="text" name="q" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”." autofocus>
                <button type="submit">ğŸ”</button>
            </form>
        </div>
    </div>

    <div class="main-menu-overlay" id="main-menu-modal">
        <button class="close-main-menu-button" aria-label="ë‹«ê¸°">X</button>
        <div class="menu-content">
            <h2>ì „ì²´ ë©”ë‰´</h2>
            <nav class="full-menu">
                <a href="index.html">í™ˆ</a> 
                <a href="about.html">ABOUT US</a> 
                <a href="hot.html">HOT NOW</a>
                <a href="category.html">CATEGORY</a>
                <a href="bookmark.html">BOOKMARK</a>
            </nav>
        </div>
    </div>

    <script>
        // ìš”ì†Œ ì„ íƒ
        const openSearchLink = document.getElementById('open-search');
        const searchModal = document.getElementById('search-modal');
        const closeSearchButton = document.querySelector('.close-search-button');

        const openMainMenuLink = document.getElementById('open-main-menu');
        const mainMenuModal = document.getElementById('main-menu-modal');
        const closeMainMenuButton = document.querySelector('.close-main-menu-button');
        
        // ìŠ¬ë¼ì´ë” ìš”ì†Œ ì„ íƒ (ìˆ˜ë™ ë²„íŠ¼ í¬í•¨)
        const slider = document.getElementById('image-slider');
        const prevButton = document.getElementById('prev-slide'); 
        const nextButton = document.getElementById('next-slide'); 
        let currentIndex = 0;
        const totalSlides = 4;

        // ---------------------------------------------
        // 1. ìŠ¬ë¼ì´ë” ë¡œì§ (ìë™ -> ìˆ˜ë™)
        // ---------------------------------------------
        function updateSlider() {
            // ì¸ë±ìŠ¤ ë²”ìœ„ í™•ì¸ ë° ì¡°ì • (ìˆœí™˜)
            if (currentIndex < 0) {
                currentIndex = totalSlides - 1; 
            } else if (currentIndex >= totalSlides) {
                currentIndex = 0; 
            }

            const offset = currentIndex * -25; 
            slider.style.transform = `translateX(${offset}%)`;
        }

        // ì´ì „ ë²„íŠ¼ í´ë¦­ ë¦¬ìŠ¤ë„ˆ
        prevButton.addEventListener('click', () => {
            currentIndex--;
            updateSlider();
        });

        // ë‹¤ìŒ ë²„íŠ¼ í´ë¦­ ë¦¬ìŠ¤ë„ˆ
        nextButton.addEventListener('click', () => {
            currentIndex++;
            updateSlider();
        });
        
        // ì´ˆê¸° ë¡œë“œ ì‹œ ì‹¤í–‰
        document.addEventListener('DOMContentLoaded', updateSlider);


// ---------------------------------------------
    // 2. ê²€ìƒ‰ ì˜¤ë²„ë ˆì´ ë¡œì§
    // ---------------------------------------------
    
   // index.html íŒŒì¼ì˜ ìŠ¤í¬ë¦½íŠ¸ ë¶€ë¶„ í™•ì¸
document.querySelector('#search-modal form').addEventListener('submit', function(e) {
    e.preventDefault(); // <-- ì´ ì¤„ì´ 405 ì˜¤ë¥˜ ë°©ì§€ ë° í˜„ì¬ ë¡œì§ ì‹¤í–‰ì˜ í•µì‹¬ì…ë‹ˆë‹¤.
    
    const searchInput = document.querySelector('#search-modal input[name="q"]');
    const query = searchInput.value.trim();

    if (query) {
        // â­ï¸ ê²€ìƒ‰ì–´ê°€ category.htmlë¡œ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬ë˜ëŠ”ì§€ í™•ì¸
        window.location.href = `category.html?search=${encodeURIComponent(query)}`;
    } else {
        alert('ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
    }
});

    openSearchLink.addEventListener('click', (e) => {
        e.preventDefault();
        searchModal.classList.add('active');
        // ì˜¤ë²„ë ˆì´ê°€ ì—´ë¦´ ë•Œ inputì— í¬ì»¤ìŠ¤
        searchModal.querySelector('input[name="q"]').focus(); 
    });

    closeSearchButton.addEventListener('click', () => {
        searchModal.classList.remove('active');
    });

        // ---------------------------------------------
        // 3. ì „ì²´ ë©”ë‰´ ì˜¤ë²„ë ˆì´ ë¡œì§
        // ---------------------------------------------

        openMainMenuLink.addEventListener('click', (e) => {
            e.preventDefault();
            mainMenuModal.classList.add('active');
        });

        closeMainMenuButton.addEventListener('click', () => {
            mainMenuModal.classList.remove('active');
        });
    </script>
</body>
</html>